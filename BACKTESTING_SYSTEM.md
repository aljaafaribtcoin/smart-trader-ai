# ูุธุงู Backtesting ุงููุชูุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ ูุธุงู Backtesting ูุชูุงูู ูุงุฎุชุจุงุฑ ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุฏุงูู ุนูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ูููุงุณ ุฏูุฉ ุงูุชูุตูุงุช ูุงูุฃููุงุท ุงูููุชุดูุฉ.

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1. ุฌุฏูู backtesting_runs
ูุฎุฒู ูุนูููุงุช ูู ุงุฎุชุจุงุฑ Backtest:
- ูุนูููุงุช ุงูุงุฎุชุจุงุฑ: ุงูุงุณูุ ุงูุฑูุฒุ ุงูุฅุทุงุฑ ุงูุฒูููุ ุงูุชูุงุฑูุฎ
- ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ: ุชูุตูุงุชุ ุฃููุงุทุ ุฃู ูุคุดุฑุงุช
- ุงูุฅุนุฏุงุฏุงุช: ุฑุฃุณ ุงููุงูุ ูุณุจุฉ ุงููุฎุงุทุฑุฉุ ุนุฏุฏ ุงูุตููุงุช ููููุงู
- **ููุงููุณ ุงูุฃุฏุงุก ุงูุดุงููุฉ:**
  - ุฅุฌูุงูู ุงูุตููุงุช / ุงูุฑุงุจุญุฉ / ุงูุฎุงุณุฑุฉ
  - ูุนุฏู ุงููุฌุงุญ (Win Rate)
  - ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ ุงูุฅุฌูุงููุฉ
  - ุตุงูู ุงูุฑุจุญ ูุงููุณุจุฉ ุงููุฆููุฉ
  - ูุชูุณุท ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ
  - ุฃูุจุฑ ุฑุจุญ/ุฎุณุงุฑุฉ
  - Profit Factor (ูุณุจุฉ ุงูุฃุฑุจุงุญ ููุฎุณุงุฆุฑ)
  - Max Drawdown (ุฃูุตู ุงูุฎูุงุถ)
  - Sharpe Ratio (ูุณุจุฉ ุดุงุฑุจ ูููุฎุงุทุฑ)

### 2. ุฌุฏูู backtest_trades
ูุฎุฒู ูู ุตููุฉ ูุญุงูุงุฉ ูู Backtest:
- ุชูุงุตูู ุงูุตููุฉ: ุงูุฏุฎููุ ุงูุฎุฑูุฌุ ุงูุงุชุฌุงู
- ุฃูุฏุงู ุงูุฑุจุญ ูููู ุงูุฎุณุงุฑุฉ
- ุญุฌู ุงููุฑูุฒ ูุงููุฎุงุทุฑุฉ
- ุงููุชุงุฆุฌ: ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉุ ุณุจุจ ุงูุฎุฑูุฌ
- ุงูุฑุจุท ุจุงูุชูุตูุงุช/ุงูุฃููุงุท ุงูุฃุตููุฉ

### 3. Materialized View: backtest_statistics
ุฅุญุตุงุฆูุงุช ูุฌูุนุฉ ุญุณุจ:
- ุงูุฑูุฒ
- ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ
- ุงูุฅุทุงุฑ ุงูุฒููู
- ูุชูุณุท ูุนุฏู ุงููุฌุงุญ
- ูุชูุณุท ุงูุนุงุฆุฏ
- ุฃูุถู ูุฃุณูุฃ ูุชูุฌุฉ

## โ๏ธ Edge Function: run-backtest

### ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:

1. **ุฌูุจ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ**
   - ุงูุดููุน (candles) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุงูุชูุตูุงุช/ุงูุฃููุงุท ูููุชุฑุฉ ุงููุญุฏุฏุฉ

2. **ูุญุงูุงุฉ ุงูุชุฏุงูู**
   - ุชูููุฐ ุงูุตููุงุช ุจูุงุกู ุนูู ุงูุชูุตูุงุช
   - ุญุณุงุจ ููุงุท ุงูุฏุฎูู ูุงูุฎุฑูุฌ
   - ุชุทุจูู ููุงุนุฏ ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ
   - ูุฑุงูุจุฉ ุฃูุฏุงู ุงูุฑุจุญ ูููู ุงูุฎุณุงุฑุฉ

3. **ุญุณุงุจ ุงูููุงููุณ**
   - Win Rate
   - Net Profit & ROI
   - Average Win/Loss
   - Profit Factor
   - Max Drawdown
   - Sharpe Ratio

### ุฎูุงุฑุฒููุฉ ุงููุญุงูุงุฉ:

```typescript
ููู ุชูุตูุฉ:
  1. ุงูุชุญูู ูู ุงูุญุฏ ุงูุฃูุตู ููุตููุงุช ุงูููููุฉ
  2. ุญุณุงุจ ุญุฌู ุงููุฑูุฒ ุจูุงุกู ุนูู ุงููุฎุงุทุฑุฉ
  3. ูุญุงูุงุฉ ุฏุฎูู ุงูุตููุฉ
  4. ูุชุงุจุนุฉ ุงูุดููุน ุงูุชุงููุฉ:
     - ุงูุชุญูู ูู ููู ุงูุฎุณุงุฑุฉ
     - ุงูุชุญูู ูู ุฃูุฏุงู ุงูุฑุจุญ (TP1, TP2, TP3)
     - ุงูุฎุฑูุฌ ุนูุฏ ุชุญูู ุฃุญุฏ ุงูุดุฑูุท
  5. ุญุณุงุจ ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ
  6. ุชุญุฏูุซ ุฑุฃุณ ุงููุงู
  7. ุญุณุงุจ Drawdown
```

## ๐จ ููููุงุช ุงููุงุฌูุฉ

### 1. BacktestRunner
ูููุฐุฌ ูุฅูุดุงุก Backtest ุฌุฏูุฏ:
- ุงุฎุชูุงุฑ ุงูุฑูุฒ ูุงูุฅุทุงุฑ ุงูุฒููู
- ุชุญุฏูุฏ ูุทุงู ุงูุชูุงุฑูุฎ
- ุงุฎุชูุงุฑ ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ
- ุฅุนุฏุงุฏุงุช ุฑุฃุณ ุงููุงู ูุงููุฎุงุทุฑุฉ
- ุฒุฑ ุชุดุบูู ุงูุงุฎุชุจุงุฑ

### 2. BacktestResults
ุนุฑุถ ูุชุงุฆุฌ Backtest ุจุดูู ููุตู:
- **ุจุทุงูุงุช ุงูููุงููุณ ุงูุฑุฆูุณูุฉ:**
  - ุฅุฌูุงูู ุงูุตููุงุช
  - ูุนุฏู ุงููุฌุงุญ
  - ุตุงูู ุงูุฑุจุญ
  - ุงูุนุงุฆุฏ %
  - ุงูุตููุงุช ุงูุฑุงุจุญุฉ/ุงูุฎุงุณุฑุฉ

- **ุงูููุงููุณ ุงูุชูุตูููุฉ:**
  - ูุชูุณุท ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ
  - ุฃูุจุฑ ุฑุจุญ/ุฎุณุงุฑุฉ
  - Profit Factor
  - Max Drawdown
  - Sharpe Ratio
  - ููุช ุงูุชูููุฐ

- **ุชุญููู ุงูุฃุฏุงุก:**
  - Progress bars ููุนุฏู ุงููุฌุงุญ ูุงูุนุงุฆุฏ
  - ุชูููู Profit Factor
  - ููุงุญุธุงุช ูุชูุตูุงุช

### 3. BacktestingDashboard
ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ:
- ูููุฐุฌ ุฅูุดุงุก Backtest ุฌุฏูุฏ
- ุณุฌู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุงูุณุงุจูุฉ
- ุญุงูุฉ ูู ุงุฎุชุจุงุฑ (ููุฏ ุงูุชูููุฐุ ููุชููุ ูุดู)
- ููุฎุต ุงููุชุงุฆุฌ ููู ุงุฎุชุจุงุฑ
- ุฃุฒุฑ ุนุฑุถ ุงูุชูุงุตูู ูุงูุญุฐู

## ๐ ุงูููุงููุณ ุงููุญุณูุจุฉ

### 1. Win Rate (ูุนุฏู ุงููุฌุงุญ)
```
Win Rate = (Winning Trades / Total Trades) ร 100
```
- ููุชุงุฒ: > 60%
- ุฌูุฏ: 50-60%
- ููุจูู: 40-50%
- ุถุนูู: < 40%

### 2. Profit Factor
```
Profit Factor = Total Profit / |Total Loss|
```
- ููุชุงุฒ: > 2.0
- ุฌูุฏ: 1.5 - 2.0
- ููุจูู: 1.0 - 1.5
- ุถุนูู: < 1.0

### 3. Max Drawdown
```
Max Drawdown = (Peak Capital - Current Capital) / Peak Capital ร 100
```
- ููุชุงุฒ: < 10%
- ุฌูุฏ: 10-20%
- ููุจูู: 20-30%
- ุฎุทุฑ: > 30%

### 4. Sharpe Ratio
```
Sharpe Ratio = Average Return / Standard Deviation of Returns
```
- ููุชุงุฒ: > 2.0
- ุฌูุฏ: 1.0 - 2.0
- ููุจูู: 0.5 - 1.0
- ุถุนูู: < 0.5

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก Backtest ุฌุฏูุฏ:

1. ุงูุชูู ุฅูู ุตูุญุฉ Backtesting
2. ุงููุฃ ุงููููุฐุฌ:
   - ุงุณู ุงูุงุฎุชุจุงุฑ
   - ุงูุฑูุฒ (BTCUSDT, ETHUSDT, ...)
   - ุงูุฅุทุงุฑ ุงูุฒููู (15m, 1h, 4h, 1d)
   - ูุทุงู ุงูุชูุงุฑูุฎ
   - ููุน ุงูุงุณุชุฑุงุชูุฌูุฉ
   - ุฑุฃุณ ุงููุงู ุงูุงุจุชุฏุงุฆู ($)
   - ูุณุจุฉ ุงููุฎุงุทุฑุฉ (%)
   - ุงูุญุฏ ุงูุฃูุตู ููุตููุงุช ููููุงู
3. ุงููุฑ ุนูู "ุชุดุบูู Backtest"
4. ุงูุชุธุฑ ุงูุชูุงู ุงูุชูููุฐ

### ุนุฑุถ ุงููุชุงุฆุฌ:

1. ูู ุณุฌู ุงูุงุฎุชุจุงุฑุงุชุ ุงููุฑ ุนูู ุฃููููุฉ ุงูุนูู ๐๏ธ
2. ุณุชูุชุญ ูุงูุฐุฉ ููุจุซูุฉ ุจุงููุชุงุฆุฌ ุงูููุตูุฉ
3. ุฑุงุฌุน ุฌููุน ุงูููุงููุณ ูุงูุฅุญุตุงุฆูุงุช
4. ูุงุฑู ุจูู ุงุฎุชุจุงุฑุงุช ูุฎุชููุฉ

## ๐ ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุงุฎุชุจุงุฑ ุงุณุชุฑุงุชูุฌูุฉ BTC ููุดูุฑ ุงููุงุถู
```
ุงูุงุณู: BTC Signals Test - January
ุงูุฑูุฒ: BTCUSDT
ุงูุฅุทุงุฑ ุงูุฒููู: 1h
ูู: 2025-01-01
ุฅูู: 2025-01-31
ุงูุงุณุชุฑุงุชูุฌูุฉ: signals
ุฑุฃุณ ุงููุงู: $10,000
ุงููุฎุงุทุฑุฉ: 2%
ุงูุตููุงุช ููููุงู: 3
```

### ูุซุงู 2: ุงุฎุชุจุงุฑ ุฃููุงุท ETH
```
ุงูุงุณู: ETH Patterns Backtest
ุงูุฑูุฒ: ETHUSDT
ุงูุฅุทุงุฑ ุงูุฒููู: 4h
ูู: 2024-12-01
ุฅูู: 2025-01-31
ุงูุงุณุชุฑุงุชูุฌูุฉ: patterns
ุฑุฃุณ ุงููุงู: $20,000
ุงููุฎุงุทุฑุฉ: 1.5%
ุงูุตููุงุช ููููุงู: 2
```

## ๐ ุงูุฃูุงู

- โ RLS Policies ุนูู ุฌููุน ุงูุฌุฏุงูู
- โ ูู ูุณุชุฎุฏู ูุฑู ุงุฎุชุจุงุฑุงุชู ููุท
- โ JWT verification ุนูู Edge Function
- โ Validation ุนูู ุฌููุน ุงููุฏุฎูุงุช

## โก ุงูุฃุฏุงุก

- **ูุชูุณุท ููุช ุงูุชูููุฐ**: 5-30 ุซุงููุฉ
  - ูุนุชูุฏ ุนูู:
    - ุนุฏุฏ ุงูุดููุน
    - ุนุฏุฏ ุงูุชูุตูุงุช
    - ุทูู ุงููุชุฑุฉ ุงูุฒูููุฉ

- **Indexes ูุญุณููุฉ**:
  - user_id, created_at
  - status
  - run_id
  - entry_time

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุฌูุฏุฉ ุงูุจูุงูุงุช**: ุงููุชุงุฆุฌ ุชุนุชูุฏ ุนูู ุฌูุฏุฉ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ุงููุชุงุญุฉ
2. **ุงูุชุฑุงุถุงุช ุงููุญุงูุงุฉ**:
   - Slippage ุบูุฑ ูุญุณูุจ
   - Fees/Commissions ุบูุฑ ูุญุณูุจุฉ
   - ุงูุณูููุฉ ููุชุฑุถุฉ ุบูุฑ ูุญุฏูุฏุฉ
   - ุงูุชูููุฐ ููุฑู ุนูุฏ ุงูุฃุณุนุงุฑ ุงููุญุฏุฏุฉ

3. **ูุญุฏูุฏูุฉ ุงูุงุฎุชุจุงุฑ**:
   - ุงููุชุงุฆุฌ ุงูุณุงุจูุฉ ูุง ุชุถูู ูุชุงุฆุฌ ูุณุชูุจููุฉ
   - ุธุฑูู ุงูุณูู ุงูุญูุฉ ุชุฎุชูู ุนู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ
   - ุงูุนูุงูู ุงูููุณูุฉ ุบูุฑ ูุญุณูุจุฉ

## ๐ฏ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ Slippage simulation
- [ ] ุญุณุงุจ ุงูุฑุณูู ูุงูุนูููุงุช
- [ ] Walk-forward analysis
- [ ] Monte Carlo simulation
- [ ] Strategy optimization
- [ ] Genetic algorithms ููุจุญุซ ุนู ุฃูุถู ุงููุนุงููุงุช
- [ ] Portfolio backtesting (ุนุฏุฉ ุฑููุฒ ูุนุงู)
- [ ] Live paper trading
- [ ] Export results to PDF/Excel
- [ ] Compare multiple backtests

---

โ **ูุธุงู Backtesting ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู!**
