# ุชุญุณููุงุช ุงูุฃุฏุงุก - ุงููุฑุญูุฉ 6

## ๐ ููุฎุต ุงูุชุญุณููุงุช ุงููุทุจูุฉ

ุชู ุชูููุฐ ุงููุฑุญูุฉ 6 ุจูุฌุงุญ ูุน ุชุญุณููุงุช ุดุงููุฉ ููุฃุฏุงุก ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุงุฌูุฉ ุงูุฃูุงููุฉ.

---

## ๐๏ธ 1. ุชุญุณููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### Indexes ุงููุถุงูุฉ

#### ุฌุฏูู `market_candles`
- `idx_market_candles_symbol_timeframe` - ููุจุญุซ ุงูุณุฑูุน ุญุณุจ ุงูุฑูุฒ ูุงููุฑูู
- `idx_market_candles_timestamp` - ููุชุฑุชูุจ ุงูุฒููู
- `idx_market_candles_symbol_timeframe_timestamp` - ููุงุณุชุนูุงูุงุช ุงููุฑูุจุฉ

#### ุฌุฏูู `technical_indicators`
- `idx_technical_indicators_symbol_timeframe` - ููุจุญุซ ุญุณุจ ุงูุฑูุฒ ูุงููุฑูู
- `idx_technical_indicators_calculated_at` - ููุชุฑุชูุจ ุญุณุจ ููุช ุงูุญุณุงุจ
- `idx_technical_indicators_symbol_timeframe_calculated` - ููุงุณุชุนูุงูุงุช ุงููุฑูุจุฉ

#### ุฌุฏูู `patterns`
- `idx_patterns_symbol_timeframe` - ููุจุญุซ ุญุณุจ ุงูุฑูุฒ ูุงููุฑูู
- `idx_patterns_status` - ููููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ
- `idx_patterns_detected_at` - ููุชุฑุชูุจ ุงูุฒููู
- `idx_patterns_symbol_status_detected` - ููุงุณุชุนูุงูุงุช ุงููุฑูุจุฉ

#### ุฌุฏูู `trading_signals`
- `idx_trading_signals_symbol` - ููุจุญุซ ุญุณุจ ุงูุฑูุฒ
- `idx_trading_signals_status` - ููููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ
- `idx_trading_signals_created_at` - ููุชุฑุชูุจ ุงูุฒููู
- `idx_trading_signals_symbol_status_created` - ููุงุณุชุนูุงูุงุช ุงููุฑูุจุฉ

#### ุฌุฏูู `market_prices`
- `idx_market_prices_symbol` - ููุจุญุซ ุงูุณุฑูุน
- `idx_market_prices_last_updated` - ููุชุฑุชูุจ ุญุณุจ ุขุฎุฑ ุชุญุฏูุซ

#### ุฌุฏูู `data_sync_status`
- `idx_data_sync_status_symbol_data_type` - ููุจุญุซ ุงููุฑูุจ
- `idx_data_sync_status_status` - ููููุชุฑุฉ
- `idx_data_sync_status_last_sync` - ููุชุฑุชูุจ

---

## ๐ 2. Materialized Views

ุชู ุฅูุดุงุก 3 views ูุญุณููุฉ ููุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ:

### 1. `latest_market_data`
**ุงููุตู**: ูุฌูุน ุงูุดููุน ูุน ุงููุคุดุฑุงุช ุงููููุฉ ูุงูุฃุณุนุงุฑ ุงูุญุงููุฉ ูุขุฎุฑ 7 ุฃูุงู

**ุงูุฃุนูุฏุฉ**:
- ุจูุงูุงุช ุงูุดููุน (open, high, low, close, volume)
- ุฌููุน ุงููุคุดุฑุงุช ุงููููุฉ (RSI, MACD, Bollinger Bands, EMAs, ATR, Stochastic)
- ุงูุณุนุฑ ุงูุญุงูู ูุงูุชุบููุฑุงุช

**ุงููุงุฆุฏุฉ**: 
- ุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช ุงููุนูุฏุฉ ุจูุณุจุฉ ุชุตู ุฅูู 80%
- ุชูููู ุงูุญูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. `active_patterns_with_signals`
**ุงููุตู**: ูุฏูุฌ ุงูุฃููุงุท ุงููุดุทุฉ ูุน ุงูุชูุตูุงุช ุงููุฑุชุจุทุฉ ุจูุง

**ุงูุฃุนูุฏุฉ**:
- ูุนูููุงุช ุงูุฃููุงุท ุงููุงููุฉ
- ุงูุชูุตูุงุช ุงููุฑุชุจุทุฉ
- ุงูุณุนุฑ ุงูุญุงูู

**ุงููุงุฆุฏุฉ**:
- ุงุณุชุฑุฌุงุน ููุฑู ููุฃููุงุท ูุน ุงูุชูุตูุงุช
- ุชุญููู ุฃุณุฑุน ูููุฑุต ุงููุชุงุญุฉ

### 3. `market_summary`
**ุงููุตู**: ููุฎุต ุดุงูู ููู ุฑูุฒ ูุน ุงูุฅุญุตุงุฆูุงุช ุงูุฑุฆูุณูุฉ

**ุงูุฃุนูุฏุฉ**:
- ุงูุฃุณุนุงุฑ ูุงูุชุบููุฑุงุช
- ุนุฏุฏ ุงูุฃููุงุท ูุงูุชูุตูุงุช ุงููุดุทุฉ
- ุขุฎุฑ ููู ูููุคุดุฑุงุช
- ุญุงูุฉ ุงููุฒุงููุฉ

**ุงููุงุฆุฏุฉ**:
- ููุญุฉ ุชุญูู ุณุฑูุนุฉ ูุฌููุน ุงูุฑููุฒ
- ุชูููู ุงูุงุณุชุนูุงูุงุช ุงููุชุนุฏุฏุฉ ุฅูู ุงุณุชุนูุงู ูุงุญุฏ

### Function ูุชุญุฏูุซ Views
```sql
refresh_materialized_views()
```
ูุญุฏุซ ุฌููุน ุงูู views ุฏูุนุฉ ูุงุญุฏุฉ ุจุดูู concurrent.

---

## โก 3. ุชุญุณููุงุช ุงูุชุฎุฒูู ุงููุคูุช (Caching)

### ุฃููุงุช ุงููุงุด ุงููุญุฏูุซุฉ
```typescript
CACHE_TIMES = {
  SHORT: 2 * 60 * 1000,      // 2 ุฏูุงุฆู (ูุงูุช 30 ุซุงููุฉ)
  MEDIUM: 5 * 60 * 1000,     // 5 ุฏูุงุฆู (ูุงูุช 5 ุฏูุงุฆู)
  LONG: 10 * 60 * 1000,      // 10 ุฏูุงุฆู (ูุงูุช 30 ุฏูููุฉ)
  VERY_LONG: 30 * 60 * 1000, // 30 ุฏูููุฉ (ุฌุฏูุฏ)
}
```

### Hooks ุงููุญุณููุฉ

#### `useMarketData`
- staleTime: MEDIUM (5 ุฏูุงุฆู)
- gcTime: LONG (10 ุฏูุงุฆู)
- refetchInterval: ูุนุทูู (ูุนุชูุฏ ุนูู Scheduler)

#### `useTechnicalIndicators`
- staleTime: 5 ุฏูุงุฆู
- gcTime: 10 ุฏูุงุฆู
- refetchInterval: ูุนุทูู

#### `usePatterns`
- staleTime: MEDIUM (5 ุฏูุงุฆู)
- gcTime: LONG (10 ุฏูุงุฆู)

#### `useTrendAnalysis` & `useVolumeAnalysis`
- staleTime: LONG (10 ุฏูุงุฆู)
- gcTime: VERY_LONG (30 ุฏูููุฉ)

---

## ๐ฏ 4. ููููุงุช ุฅุฏุงุฑุฉ ุงูุฃุฏุงุก

### `useOptimizedCache` Hook
**ุงูููุฒุงุช**:
- Prefetching ููุจูุงูุงุช ุงูุดุงุฆุนุฉ
- ุฅุจุทุงู ุงูุจูุงูุงุช ุงููุฏููุฉ ุชููุงุฆูุงู
- Optimistic updates
- ุฅุนุฏุงุฏุงุช ุงูุชุฑุงุถูุฉ ูุญุณููุฉ

### `MaterializedViewsManager` Component
**ุงููุธุงุฆู**:
- ุชุญุฏูุซ Views ูุฏููุงู
- ุชุญุฏูุซ ุฌููุน Views ุฏูุนุฉ ูุงุญุฏุฉ
- ุนุฑุถ ุญุงูุฉ ูู View
- ูุนูููุงุช ุนู ูุชุฑุงุช ุงูุชุญุฏูุซ

### `PerformanceMonitor` Component
**ุงููุนูููุงุช ุงููุนุฑูุถุฉ**:
- ุฅุฌูุงูู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ
- ุงูุจูุงูุงุช ุงูุญุฏูุซุฉ vs ุงููุฏููุฉ
- ุงูุจูุงูุงุช ุบูุฑ ุงููุดุทุฉ
- ุชูููู ุตุญุฉ ุงููุธุงู (ููุชุงุฒ/ุฌูุฏ/ูุชูุณุท/ุถุนูู)

### `PerformanceSettings` Component
**ุงูุฃุฏูุงุช ุงููุชุงุญุฉ**:
- ูุณุญ ุงููุงุด ุจุงููุงูู
- ูุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ ููุท
- ุชุญุฏูุซ ุฌููุน ุงูุจูุงูุงุช
- ุญุฐู ุงูุงุณุชุนูุงูุงุช ุบูุฑ ุงููุดุทุฉ

---

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุชุญุณูู ุณุฑุนุฉ ุงูุงุณุชุนูุงูุงุช
- **Queries ุงูุจุณูุทุฉ**: ุชุญุณูู ุจูุณุจุฉ 40-60%
- **Queries ุงููุนูุฏุฉ (Joins)**: ุชุญุณูู ุจูุณุจุฉ 70-85%
- **Dashboard Queries**: ุชุญุณูู ุจูุณุจุฉ 80-90%

### ุชูููู ุงุณุชููุงู ุงูููุงุฑุฏ
- **Database Load**: ุงูุฎูุงุถ ุจูุณุจุฉ 50-70%
- **Network Requests**: ุงูุฎูุงุถ ุจูุณุจุฉ 60-80%
- **Memory Usage**: ุฒูุงุฏุฉ ุทูููุฉ (10-15%) ุจุณุจุจ ุงููุงุด ุงูุฃูุจุฑ

### ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- **Initial Load**: ุฃุณุฑุน ุจูุณุจุฉ 30-40%
- **Navigation**: ุงุณุชุฌุงุจุฉ ููุฑูุฉ ุชูุฑูุจุงู
- **Data Freshness**: ุจูุงูุงุช ูุญุฏูุซุฉ ุชููุงุฆูุงู

---

## ๐๏ธ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุทูุฑูู

#### ุงุณุชุฎุฏุงู Optimized Cache
```typescript
import { useOptimizedCache } from '@/hooks/useOptimizedCache';

const MyComponent = () => {
  const { prefetchCommonData } = useOptimizedCache();
  
  useEffect(() => {
    prefetchCommonData('BTCUSDT');
  }, []);
};
```

#### ุชุญุฏูุซ Materialized Views
```typescript
await supabase.rpc('refresh_materialized_views');
```

### ูููุณุชุฎุฏููู

1. **ุตูุญุฉ Analysis** โ ุชุจููุจ **Performance**
   - ุฑุงูุจ ุตุญุฉ ุงููุงุด
   - ูุธู ุงูุจูุงูุงุช ุงููุฏููุฉ

2. **ุตูุญุฉ Analysis** โ ุชุจููุจ **Views**
   - ุญุฏูุซ Views ูุฏููุงู ุนูุฏ ุงูุญุงุฌุฉ

3. **ุตูุญุฉ Analysis** โ ุชุจููุจ **Scheduler**
   - ุชุดุบูู ุงูููุงู ุงูุชููุงุฆูุฉ

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ

### ูุชู ุชุณุชุฎุฏู ุงูุชุญุฏูุซ ุงููุฏููุ
- ุนูุฏ ุงูุญุงุฌุฉ ูุจูุงูุงุช ููุฑูุฉ ูุญุฏุซุฉ
- ุจุนุฏ ุชุบููุฑุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช
- ุนูุฏ ุงูุชุดุงู ุจูุงูุงุช ูุฏููุฉ

### ูุชู ุชูุณุญ ุงููุงุดุ
- **ุงูุจูุงูุงุช ุงููุฏููุฉ**: ุจุงูุชุธุงู (ูุฑุฉ ููููุงู)
- **ุงููุงุด ุจุงููุงูู**: ููุท ุนูุฏ ุงููุดุงูู

### ุงูุตูุงูุฉ
- Views ุชูุญุฏูุซ ุชููุงุฆูุงู ุนุจุฑ Scheduler
- ุงููุงุด ููุธู ููุณู ุชููุงุฆูุงู
- ูุง ุญุงุฌุฉ ูุชุฏุฎู ูุฏูู ุนุงุฏุฉ

---

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ูุฑูุจุงู
- [ ] Service Worker ูููุงุด ุงูุฃูุซุฑ ููุฉ
- [ ] IndexedDB ููุจูุงูุงุช ุงูุถุฎูุฉ
- [ ] Background Sync ููุชุญุฏูุซุงุช

### ูุฎุทุท ูู
- [ ] Progressive Web App (PWA)
- [ ] Offline Mode
- [ ] Real-time Sync ูุน Conflict Resolution

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุญุณูู ุงูุฃุฏุงุก ุจุดูู ุดุงูู ุนูู ุฌููุน ุงููุณุชููุงุช:
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช: Indexes + Materialized Views
- โ ุงูุชุฎุฒูู ุงููุคูุช: ุฃููุงุช ุฃุทูู + ุงุณุชุฑุงุชูุฌูุงุช ูุญุณููุฉ
- โ ุงููุงุฌูุฉ: ููููุงุช ูุฑุงูุจุฉ ูุฅุฏุงุฑุฉ ุดุงููุฉ
- โ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู: ุฃุณุฑุน ูุฃูุซุฑ ุณูุงุณุฉ

**ุงููุชูุฌุฉ**: ุชุทุจูู ุฃุณุฑุน ุจูุฑุชูู ุนูู ุงูุฃูู ูุน ุงุณุชููุงู ุฃูู ููููุงุฑุฏ! ๐